1.   操作系统与用户的接口有几种？它们各自用在什么场合？

     两种，命令接口和程序接口。

     命令接口：分为联机命令接口、脱机命令接口和图形用户命令接口。方便用户直接控制自己的作业而提供的接口。

     程序接口：（又称系统调用），是为用户能在程序一级访问操作系统功能而设置的，是用户程序取得操作系统服务的唯一途径。

2.   什么是中断？如果同一中断级中的多个设备接口中同时都有中断请求时，如何处理?

     中断是指处理器对系统中或系统外发生的异步事件的响应。

     如果同一中断级中的多个设备接口中同时都有中断请求时，可以采用定优先数或者轮转法选择一个中断执行。

3.   为什么创建进程的操作要用原语来实现？
     创建进程属于进程控制，如果操作不是原语的，当进程状态转换时，会把一个进程放到另一个队列，发生错误。因此需要保持操作的原子性。

4.   在页式存储管理系统中页表的功能是什么？当系统的地址空间很大时，会给页表的设计带来哪些新问题？如何去应对这些问题？

     页表的功能：在页式存储管理系统中，允许将进程的每一页离散地存储在内存的任何一个物理页面上，为保证进程的正常运行，系统建立了页表，记录进程每一页被分配在内存的物理块号。页表的功能是**实现从页号到物理块号的地址映射**。

     地址空间很大时，页表也非常大，占有大量的内存空间。（例如：32位地址空间的页式系统，设页的大小为4KB，则进程的页表项最大可达1MB。若一个页表项占4B，则页表需要占用4MB的连续内存空间。）

     为解决这一问题可从两方面入手：一方面，可以将页表离散存储；另一方面可以将页表一部分调入内存，其余部分放在外存。

     具体实现方案：采用**两级页表**。页表分页，页面大小与内存物理块大小一致，并编号放入不同的物理块，离散分配的页表再建立一张页表，作为外层页表（页目录），此时进程的逻辑地址为： 外层页号+页号+页内位移。

     当运行进程，将外层页表调入内存，对所有页表而言，**只调入少量的页表**，使用时若找不到相应页表，则**产生中断请求OS将需要的页表调入内存**。两级页表适应了大地址空间的需要，由虚拟存储技术支持，但也增加了地址变换的开销和管理的复杂度。还可设计三级、四级页表。

5.   说明缺页中断与一般中断的主要区别

     缺页中断与一般中断一样要经历保护CPU现场，分析中断原因，转中断处理程序进行处理及恢复中断现场等步骤，但缺页中断时一种特殊的中断，区别主要两个：

     (1)在指令执行期间产生和处理中断。通常CPU是一条**指令执行后**检查是否有中断发生，若有去处理；否则执行下一条指令。但缺页中断在**指令执行期间**发现要访问的指令或数据不在内存时，产生和处理中断。

     (2)一条指令执行期间可能产生多次中断。如要求读取多个字节数据的指令，指令中的数据可能跨多个页面，该指令执行可能发生多次中断：访问指令中断、访问数据中断。

6.   局部置换和全局置换有什么区别？多道程序系统中，建议选择哪种置换？

     局部置换：当进程在执行过程中发生缺页时，只在**分配给该进程的物理块中选择一页换出**。

     全局置换：在所有用户能使用的**整个存储空间中选择一个页面**换出。

     建议：局部置换策略。 因为即使某个程序出现抖动现象，不会引起其他进程产生**抖动**，将抖动控制在最小范围内。

7.   请简述：(1)使用文件系统时，open()系统调用的基本操作和close()系统调用的基本操作。(2)若取消显式的open()和close()操作会有什么不利？

     (1)open()操作完成文件的打开功能，将待访问文件的目录信息读入内存活动文件表，建立起用户进程与文件的联系。

     ​     close()操作完成文件的关闭操作，该操作删除内存中有关该文件的目录信息，切断用户与该文件的联系。若文件在打开期间有过某种修改，还应将其写回磁盘。

     (2)取消显式的open()和close()操作会使得文件读/写系统的开销增加。因为每次读写文件之前都需要判断文件是否已被打开，若未打开，则要完成打开操作。系统结束时需额外执行close操作。当用户进程已完成一个文件的访问但进程本身尚未执行完毕时，因无法显式地close操作关闭文件，不利于系统资源的回收。

8.   某文件系统为一级目录结构，文件的数据一次性写入磁盘，已写入的文件不可修改，但可多次创建新文件。请问：

     （1）在连续、链式、索引三种文件的数据块组织方式中，哪种更合适？ 说明理由。

     （2）为了定位文件数据块，需要在FCB中设计哪些相关描述字段？

     （1）连续更好。（文件数据集中存放，FCB集中存放）磁盘寻道时间更短，文件随机访问效率更高。

     （2）在FCB中加入<起始块号，块数>或者<起始块号，结束块号>的信息。

9.   设某文件A由100个物理块组成，现分别用连续文件、链接文件(隐式)和索引文件来构造，针对三种不同的结构，
     (1) 将物理块加到连续文件正中间，需要（   ）次磁盘I/O？

     (2)将物理块加到链接文件(隐式)正中间，需要（   ）次磁盘I/O？

     (3)如果索引表已经在内存中，将物理块加到索引文件正中间，需要（   ）次磁盘I/O？

     (1) 101次    连续文件，文件正中间没有空间拓展文件，需要把一个物理块加到文件中间，先查找文件控制块找到文件的第一个物理块，从而计算出文件第100块的位置。接下来，将第100块读到内存，再将它写到磁盘的下一块中。这样一个物理块需要两次访问磁盘（一次读，一次写）。一半的物理块读写完毕后，完成100次的读写即100次IO操作。最后，将新加入内容从内存中写入物理块中，为1次IO操作。 因此共101次磁盘IO操作。

     (2) 52次  链接文件， 链接文件需要读出前50块，找出第50块的链接指针（访问磁盘50次），然后将新加入的内容从内存中写到新分配的物理块中，将新分配的物理块的链接指针指向第51块（访问磁盘1次），再将第50块的连接指针指向新插入的物理块（访问磁盘1次）。 因此共52次磁盘IO操作。

     (3) 1次  索引文件，设索引表已内存中，将新的内容从内存中写到磁盘物理块中，因此访问磁盘1次。修改索引表信息在内存中进行。

15.   存放在某个磁盘上的文件系统，采用混合索引分配方式，其FCB中共有13个地址项，第0 ~ 9个地址项为直接地址，第10个地址项为一次间接地址，第11个地址项为二次间接地址，第12个地址项为三次间接地址。如果每个盘块的大小为512字节，若盘块号需要用3个字节来描述，而每个盘块最多存放160个盘块地址，试分析该文件系统允许文件的最大长度是多少字节？（给出计算过程，  结果也可用K字节表示）

      该文件系统中一个文件的最大长度可达：

      10+160+160×160+160×160×160 = 4,121,770块

      允许文件最大字节数为块数*块大小=4121770×512字节

      =2110346240字节

      或=2060885K字节

16.   假定一个盘组有100个柱面，每个柱面有16个磁道，每个磁道分为4个扇区。

      （1）整个磁盘空间有多少个存储块？  （提示：存储块=扇区数）

      （2）若用字长32位的单元来构造位示图，共需要多少个字？

      （3）字长32位的位示图中第18个字的第16位对应的块号是多少？

      （1） 整个磁盘空间存储块的数目4\*16\*100=6400 个

      （2）位示图为6400位。若字长位32位的单元来构造位示图。需要 6400/32=200个字。

      （3）字长32位的位示图中i和j从1开始编号，盘块号从1开始编号。那么对应块号为：32*(18-1)+16=560 

17.   对于处理非常频繁的I/O请求，I/O中断方式和DMA方式哪个更有效？为什么？

      DMA方式。

      中断处理方式：在I/O设备输入每个数据的过程中，由于无需CPU干预，因而可使CPU与I/O设备并行工作。仅当输完一个数据时，才需CPU花费极短的时间去做些中断处理。因此中断申请使用的是CPU处理时间，发生的时间是在一条指令执行结束之后，数据是在软件的控制下完成传送。

      而DMA方式与之不同。DMA方式：数据传输的基本单位是数据块，即在CPU与I/O设备之间，每次传送至少一个数据块；DMA方式每次申请的是总线的使用权，所传送的数据是从设备直接送入内存的，或者相反；仅在传送一个或多个数据块的开始和结束时，才需CPU干预，整块数据的传送是在控制器的控制下完成的。

18.   PCB是什么？简述其主要作用

      是什么：为了系统描述和管理进程的运行，在OS的核心为每一个进程专门定义了一个数据结构——进程控制块，PCB作为进程实体的一部分，记录了操作系统所需要的，用于描述进程当前情况和管理进程运行的全部信息，是操作系统中最重要的数据结构

      主要作用：使在多道程序环境下不能独立运行的程序成为一个能独立运行的基本单位，一个能与其他进程并发执行的过程：作为独立运行基本单位的标志；实现间断性运行方式；提供进程管理所需要的全部信息；提供进程调度所需要的全部信息；实现与其他进程的同步和通信。

19.   P-C问题中，能否使生产者进程中的两条wait 原语交换顺序？为什么？

      不能交换顺序，初始顺序是同步信号量在前面，互斥信号量在后面，要先判断缓冲池里有没有产品，再决定是否要进去，如果缓冲池里没有产品，wait(empty)进去了之后，signal(full)是释放信号量是无法知道的。

20.   高级调度和低级调度的主要任务分别是什么？为何要引入中级调度?

      高级调度的调度对象是作业，主要任务是，根据具体的某种算法，将外存的哪几个作业调入内存，高级调度主要用于多道批处理系统。

      低级调度的调度对象是进程，主要任务是，根据某种算法，决定哪几个进程获得处理机，分时，多道批处理和实时系统都应该配置

      中级调度的引入，是为了提高资源利用率和内存吞吐量，将那些暂时不能运行的进程，调入外存等待，此时进程的状态称为挂起，当他们重新拥有运行条件是，再调入，就是存储器管理中的对换

21.   简述进程的创建过程。
      1、申请空白PCB
      2、为新进程分配其运行所需的各种资源。
      3、初始化PCB
      4、若就绪队列中还能容纳新进程，则将新进程插入就绪队列。

22.   覆盖技术与对换技术的区别

      覆盖是在同一个进程或程序之间的，交换是在不同的进程或作业之间的。
      覆盖技术打破了程序必须全部装入内存才能运行的限制。而交换技术打破了进程进入内存就会一直运行到结束的限制。

      覆盖是由程序员实现的，操作系统根据程序员提供的覆盖结构来完成程序段之间的覆盖。对换技术不要求程序员给出程序段之间的覆盖结构。