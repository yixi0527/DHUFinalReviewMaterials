操作系统是计算机系统中最重要的**系统软件**，它统一管理计算机系统的**硬件资源与信息资源**，控制与调度上层软件的执行并为其提供易于使用的接口。

# 操作系统的作用和功能

## 操作系统的目标

- 方便性：执行用户程序，使得用户问题更容易解决。
- 有效性：提高系统资源利用率和系统吞吐量
- 可扩充性：便于增删改，扩充模块功能
- 开放性：遵循世界标准规范，方便实现功能兼容与互联

## 操作系统的作用

- 用户与计算机硬件系统之间的接口
- 计算机系统资源的管理者
- 实现了对计算机资源的抽象
- 计算机工作流程的组织者

## 操作系统的主要功能

- 处理机管理

    处理机的分配和运行以进程为基本单位，因为可以称为进程管理。

    - 进程控制：为作业创建进程、终止已结束的进程、控制进程在运行过程中的状态转换。
    - 进程同步：协调多个进程运行。可以互斥（锁机制）和同步（信号量机制）两种方式进行。
    - 进程通信：互相合作进程之间的信息交换
    - 调度
        - 作业调度：在作业队列中选出若干作业，分配运行资源，调入内存，建立进程，然后获得就绪状态。
        - 进程调度：在进程就绪队列中选择一个进程，分配处理机，设置现场进行执行。

- 存储器管理

    为多道程序运行提供环境，提高存储器的利用率。方便用户，从逻辑上扩充内存。

    - 内存分配：静态和动态分配方式，合理分配空间，尽量减少碎片，允许动态附加内存空间。
    - 内存保护：互不干扰；进制用户程序访问系统数据或非共享用户；界限寄存器。
    - 地址映射：逻辑地址与内存空间中物理地址的转换。
    - 内存扩充（借助虚拟技术实现）：虚拟存储技术，请求调入功能；置换功能。

- 设备管理

    响应I/O请求，分配I/O设备，完成I/O操作。

    - 缓冲管理：解决CPU与I/O设备速度不匹配的矛盾。（单缓冲、双缓冲、公用缓冲池等）
    - 设备分配：根据某种分配策略分配所需设备。
    - 设备处理（驱动）：实现CPU和设备控制器之间的通信。即由CPU向设备控制器发出I/O命令，要求它完成指定的I/O操作；或者CPU接受I/O发出的中断请求，进行响应。

- 文件管理

    对用户文件和系统文件进行管理，方便用户使用，保证文件的安全性。

    - 文件存储空间的管理：统一管理；每个文件分配必要的外存空间；设置数据结构记录空间分配使用回收等情况。
    - 目录管理：方便文件的查询和共享。
    - 文件的读/写管理和保护：读写不同时，保证一致；保护文件的控制权，安全。

- 操作系统与用户之间的接口

    - 用户接口（命令/GUI）：通过联机、脱机和图形等方式向作业发出命令以控制作业运行。
    - 程序接口（系统调用）：为用户程序在执行中访问系统资源而设置的，是用户程序取得操作系统服务的唯一途径。由一组系统调用组成，每个系统调用都是一个能完成特定功能的子程序。

# 操作系统的发展及分类

## 未配置操作系统的计算机系统

- 手工操作

- 用户独占
- CPU等待人工操作
- 脱机输入/输出方式

## 单道批处理系统

- 半自动化操作控制
- 特点
    - 成批控制程序的执行与输入输出
    - 作业控制卡与作业控制语言
    - 操作员与程序员分离
    - 资源管理程序和磁带文件系统的引入
- 缺点
    - 内存中只有一道程序
    - CPU速度与I/O速度不匹配

## 多道批处理系统

- 自动化操作控制
- 用户提交的作业先放在外存，排成一个队列；作业调度程序从后备队列中选若干调入内存，共享CPU和其他资源。
- 特点：
    - CPU与外部设备充分并行
    - 外部设备之间充分并行
    - 发挥CPU的使用效率
    - 提高单位时间的算题量
- 实现要点：
    - 使用资源：调用操作系统提供的服务例程
    - 复用CPU：调度程序（CPU空闲时让其他程序运行）
    - 使CPU与I/O设备充分并行：通道（一种独立控制设备进行I/O的专用处理器）
    - 让正在运行的程序让出CPU：中断（中断正在执行的程序，让操作系统处理突发事件）

## 分时系统

**一台主机**连接了**多个**配有显示器和键盘的**终端**并由此组成的系统。

- 特点
    - 多路性：允许多台终端同时连接到一台主机
    - 独立性：每个用户彼此互不干扰
    - 及时性：用户的请求在很短时间内获得响应
    - 交互性：用户可以通过终端与系统进行人机对话

## 实时系统

系统能及时响应外部事件的请求，在规定时间内完成对该事件的处理，并控制所有实时任务协调一致地运行。

- 类型
    - 工业（武器）控制系统
    - 信息查询系统
    - 多媒体系统
    - 嵌入式系统

- 实时任务的类型
    - 周期性实时任务和非周期性实时任务
        - 开始截止时间、完成截止时间
    - 硬实时任务和软实时任务
        - 硬实时任务：系统必须满足任务对截止时间的要求，否则后果严重
        - 软实时任务：不严格，错过了截止时间，对系统影响不会太大

# 操作系统的基本特征

## 并发

是最基本的特征，与共享互为存在条件。

- 并发：两个或多个事件在同一**时间间隔**内发生。
- 并行：两个或多个事件在同一**时刻**发生。

系统只有一个处理器时，多个程序只能并发执行。有多个处理器时，多个程序可以并行执行。

- 进程：在一个未引入进程的系统中，在属于同一个应用程序的计算程序和I/O程序之间只能是顺序执行，即只有在计算程序执行告一段落后，才允许I/O程序执行；反之，在程序执行I/O操作时，计算程序也不能执行。但在为计算程序和I/O程序分别建立一个进程后，这两个进程便可并发执行。**若对内存中的多个程序都分别建立一个进程，它们就可以并发执行。**这样便能极大地提高系统资源的利用率，增加系统的吞吐量。

## 共享

也是最基本的特征，与并发互为存在条件。

也称为资源复用。系统中资源可供内存中多个并发执行的进程共同使用。

- 互斥共享方式：一段时间内只允许一个进程访问的资源。*打印机、磁带机*

- 同时访问方式：允许一段时间内多个进程”同时“进行访问。*磁盘*

- 时分复用共享：当一种资源在时间上复用时，不同的程序或用户轮流使用它。（不可再分资源）

    空分复用共享：让同一个频段在不同的空间内得到重复利用。（可再分资源）

## 虚拟

把一个物理上的实体变为若干个逻辑上的对应物。物理实体是实际存在的，而逻辑上对应物是用户感受到的。

- 时分复用：每个虚拟处理器分得时间片后可供进程执行时使用。*虚拟处理器技术*
- 空分复用：虚拟主存可供进程作为物理地址空间使用。*虚拟存储技术*

如果没有并发性，就谈不上虚拟性。

## 异步

在多道程序环境下，由于资源有限，进程的执行不是一贯到底的，而是走走停停，以不可预知的速度向前推进。

# 操作系统结构设计

- 无结构操作系统
- 模块化结构操作系统
    - 无序
- 分层式结构操作系统
    - 分层法的设计任务是，在目标系统An和裸机系统(又称宿主系统)A0之间，铺设若干个层次的软件A1、A2、A3、…、An-1，使An通过An-1、An-2、…、A2、A1层，最终能在A0上运行。在操作系统中，常采用**自底向上法**来铺设这些中间层。
- 微内核操作系统结构
    - 足够小的内核
    - 基于客户/服务器模式
    - 应用”机制与策略分离“原理
    - 采用面向对象技术
    - 宏内核与微内核:
        - 宏内核将大部分系统功能直接实现在内核中，而微内核只实现最基本的功能，其他功能则通过进程间通信来实现。
        - 宏内核具有非常高的执行效率和良好的操作系统资源管理能力。减少进程间通信带来的性能损失，提高系统的执行速度。内核的代码量非常大，宏内核的可靠性和安全性也存在问题。
        - 微内核可以避免操作系统内核越来越大的问题，减少内核的复杂性，提高内核安全性，使得内核更加稳定，可靠。它往往需要进程间通信等方式来实现某些功能，这些方式往往会降低系统的执行效率。

## 习题

1.UNIX操作系统是一种多用户的、人机交互的(   )

- A. 多道批处理系统
- B. 实时系统
- C. 分时系统
- D. 分布式系统

2.操作系统负责为用户或用户程序承担（   ）的基本工作，并解决这些基本工作中的效率和安全问题。

- A. 与硬件无关、与应用无关
- B. 与硬件相关、与应用无关
- C. 与硬件无关、与应用相关
- D. 与硬件相关、与应用相关

3.下列哪项不属于操作系统的资源管理功能？

- A. 内存管理
- B. 磁盘管理
- C. 进程管理
- D. 数据库管理

4.引入多道程序最主要的目的是（   ）

- A. 提高实时响应速度
- B. 有利于代码共享，减少主、辅存信息交换量
- C. 充分利用CPU，减少CPU等待时间
- D. 充分利用存储器

5.（   ）的主要特点是提供即时响应和高可靠性，武器系统、航空订票系统、银行业务等均采用这样的系统。

- A. 分时系统
- B. 批处理系统
- C. 实时系统
- D. 分布式系统

6.如果分时操作系统的时间片一定，那么（   ）则响应时间越长。

- A. 用户数越多
- B. 用户数越少
- C. 内存越多
- D. 内存越少

7.在多道批处理系统中，为了充分利用各种资源，系统总是优先选择（  ）多个作业投入运行？

- A. 适应于内存容量的 
- B. 计算量大的
- C. I/O量大的
- D. 计算性和I/O性均衡的

8.在分时系统中，当用户数目为100时，为保证响应时间不超过2s，此时的时间片最大应为（    ）

- A. 10ms
- B. 20ms
- C. 50ms 
- D. 100ms 

9.现有甲、乙两道题，单道系统中，每道需执行1小时（其中，处理器工作时间为16分钟)。若在多道系统中执行，甲、乙两道题总共需执行80分钟，则多道系统中处理器的利用率为：

- A. 50%
- B. 40%
- C. 30%
- D. 67%

10.单机微内核操作系统中几乎无一例外地都采用客户/服务器模式，下列说法正确的是：

- A. 内核完成OS所有功能并在用户态下运行
- B. 内核完成OS所有功能并在核心态下运行
- C. 内核只完成OS最基本的功能并在核心态下运行，其他功能运行在用户态
- D. 内核只完成OS最基本的功能并在用户态下运行，其他功能运行在核心态

11.操作系统与用户的接口有几种？它们各自用在什么场合？

两种，命令接口和程序接口。

命令接口：分为联机命令接口、脱机命令接口和图形用户命令接口。方便用户直接控制自己的作业而提供的接口。

程序接口：（又称系统调用），是为用户能在程序一级访问操作系统功能而设置的，是用户程序取得操作系统服务的唯一途径。







CBDCC ADBBC 