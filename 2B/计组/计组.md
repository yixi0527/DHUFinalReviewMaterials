# 1 概论

## 计算机的分类

- 模拟计算机：模拟运算器件构成，变量由连续量来表示，运算过程连续。

    - 专用计算机：最有效、最经济、最快速的计算机，适应性差

    - 通用计算机：适应性强，牺牲了效率、经济和速度

        通用计算机的分类

        ![image-20240518113439421](./%E8%AE%A1%E7%BB%84.assets/image-20240518113439421.png)

- 电子数字计算机：逻辑电子器件构成，变量为开关量，数字式按位运算，运算模式离散。

| 比较内容       | 数字计算机 | 模拟计算机       |
| -------------- | ---------- | ---------------- |
| 数据表示方式   | 数字0和1   | 电压、电流等     |
| 计算方式       | 数字计算   | 电量组合和测量值 |
| 控制方式       | 程序控制   | 模拟信号组合控制 |
| 精度、抗干扰性 | 高、好     | 低、差           |
| 数据存储量     | 大         | 小、几乎无       |
| 逻辑判断能力   | 强         | 无               |

## 计算机发展史

| 年份      | 特点                           | 代表       |      |
| --------- | ------------------------------ | ---------- | ---- |
| 1946-1957 | 电子管计算机(ENIAC)            | 数据处理   |      |
| 1958-1964 | 晶体管计算机                   | 工业控制   |      |
| 1965-1971 | 中小规模集成电路计算机         | 小型计算机 |      |
| 1972-1990 | 大规模和超大规模集成电路计算机 | 微型计算机 |      |
| 1991-     | 巨大规模集成电路计算机         | 单片机     |      |

## 计算机性能指标

- 吞吐量：某一时间间隔内能够处理的信息量 字节/秒 B/S
- 响应时间：从输入有效到系统产生响应之间的时间度量 微秒/纳秒
- 利用率：给定时间间隔内，系统被实际使用的时间所占的比率，用百分比表示
- 处理机字长：运算其中一次能够完成二进制数运算的位数。8/16/32/64位。直接决定运算的精度和能力
- 总线宽度：CPU中运算器与存储器之间进行互连的内部总线二进制位数
- 存储器容量：存储器中所有存储单元的总数目，通常用KB、MB、GB、TB来表示

- 存储器带宽：存储器的速度指标，单位时间内从存储器读出的二进制数信息量，用字节数/秒表示

- 主频：CPU的工作节拍受主时钟控制，主时钟不断产生固定频率的时钟，主时钟的频率（f）叫CPU的主频。度量单位是MHz（兆赫兹）、GHz（吉赫兹）。

- 时钟周期：主频的倒数，微秒/纳秒

- CPU执行时间：表示CPU执行一段程序所占用的CPU时间。

    CPU执行时间 = CPU时钟周期数 $\times$ CPU时钟周期长

- CPI：执行一条指令所需的平均始终周期数。

    $CPI = \frac{执行某段程序所需的CPU时钟周期数}{该程序包含的指令条数}$  

- MIPS：每秒百万条指令数

    $MIPS = \frac{指令条数}{程序执行时间 \times 10^6} = \frac{时钟频率}{CPI \times 10^6}$

- FLOPS：每秒浮点操作次数。基于操作而非指令，只能用来衡量机器浮点操作的性能，而不能体现机器的整体性能。

    $FLOPS = \frac{程序中的浮点操作次数}{程序执行时间}$  

- MIPS：单位时间内的执行指令数。MIPS值越高，机器速度越快。

## 计算机的硬件

- 冯诺依曼型思想：存储程序、按地址自动执行
- 五大部件：控制器、运算器、存储器、输入设备、输出设备。

### 运算器

- 功能：处理所有的算数及逻辑运算
- 特点：采用二进制数据进行运算
- 构成：由ALU（算术逻辑单元）和各类通用寄存器构成。

### 存储器

- 功能：保存所有的程序和数据
- 特点：二进制形式保存程序和数据；存储器是按存储单元组织的，读写存储单元必须给出单元地址。
- 相关概念
    - 存储元：用于保存一位0/1二进制数据的物理器件
    - 存储单元：能够保存一个字数据的器件，由若干个存储单元构成
    - 单元地址：能够区分每一个存储单元的编号，一般从0开始编号
    - 存储容量：一个存储器所能保存的二进制信息的总量
- 分类
    - 外存（辅助存储器）：如磁盘存储器、光盘存储器；CPU不可直接访问
    - 内存（主存储器）：半导体存储器；CPU直接访问，存放当前系统运行所需的所有程序和数据
- 两个与主存相关的寄存器
    - MAR（存储器地址寄存器）：接收由CPU送来的地址信息。
    - MDR（存储器数据寄存器）：作为外界与存储器的数据通路。

### 控制器

- 功能：根据所要执行指令的功能，按顺序发出各种控制命令，协调计算机的各个部件的工作。

- 主要任务
    - 解释并执行指令
    - 控制指令的执行程序
    - 负责指令执行过程中，操作数的寻址
    - 根据指令的执行，协调相关部件的工作，如运算类指令执行时对标志寄存器的影响设置
- 指令的形式
    - 操作码：指出指令所进行的操作，如加、减、数据传送等
    - 地址码：指出进行以上操作的数据存放位置

### 适配器与输入输出设备

- 输入设备：将人们熟悉的某种信息形式变换为机器内部所能接收和识别的二进制信息形式的设备。
- 输出设备：把计算机的处理结果变成人或其他机器设备所能接收和识别的信息形式的设备。

- 适配器：保证外围设备用计算机系统特性要求的形式发送或接收信息。
- 系统总线：构成计算机系统的骨架，是多个系统部件之间进行数据传送的公共通路。

## 计算机的软件

计算机软件 = 程序 + 数据 + 文档

- 系统程序：用来简化程序设计，简化使用方法，提高计算机的使用效率，发挥和扩大计算机的功能及用途。

    >服务性程序，如诊断程序、排错程序、练习程序等；
    >
    >语言类程序，如汇编程序、编译程序、解释程序等；
    >
    >操作系统；
    >
    >数据库管理系统

- 应用程序：用户利用计算机来解决某些实际问题所编制的程序。

    > 工程设计程序、数据处理程序、自动控制程序、企业管理程序、情报检索程序、科学计算程序等等。

## 计算机的层次结构

计算机由5个以上不同的级组成，每一级都能进行程序设计。

| 级别 |     名称     |      对应      |
| :--: | :----------: | :------------: |
| 5级  |  高级语言级  |    编译程序    |
| 4级  |  汇编语言级  |    汇编程序    |
| 3级  |  操作系统级  |    操作系统    |
| 2级  |  一般机器级  |     微程序     |
| 1级  | 微程序设计级 | 直接由硬件执行 |

## 软件与硬件的逻辑等价性

任何操作可以由软件来实现，也可以由硬件来实现；任何指令的执行可以由硬件完成，也可以由软件来完成。

# 2 数据格式

- 定点格式：容许的数值范围有限，但要求的处理硬件比较简单
- 浮点格式：容许的数值范围很大，但要求的处理硬件比较复杂

## 定点表示法

约定机器中所有数据的小数点位置是固定不变的。通常将数据表示成纯小数或纯整数。

- 定点纯小数，小数点位于符号位之后，不需专门存放位置。

    $-1<X<+1$

    | 机器码                         | 表示的数      | 说明                                                    |
    | ------------------------------ | ------------- | ------------------------------------------------------- |
    | x = 0.00...0<br />x = 1.00...0 | 0             | 正负0                                                   |
    | x = 0.11...1                   | $1-2^{-n}$    | 能表示的最大的正数<br />相当于1.00...0(2) - 0.00...1(2) |
    | x = 0.00...01                  | $2^{-n}$      | 最接近0的正数                                           |
    | x = 1.00...01                  | $-2^{-n}$     | 最接近0的负数                                           |
    | x = 1.11...1                   | $-(1-2^{-n})$ | 最小负数                                                |

- 定点纯整数，小数点位于最后一位之后，不需专门存放位置。

​	$-(2^n-1)\leq X \leq +(2^n-1)$

## 浮点表示法

$N = R^E.M$

R：基数，取固定值，一般为2，隐含表示

E：指数，用移码

M：尾数，用原码

**IEEE754标准**规定了浮点数的表示格式，运算规则等。

![image-20240518121929084](./%E8%AE%A1%E7%BB%84.assets/image-20240518121929084.png)

数符S：0正1负

阶码E：含阶符的阶码，采用移码方式来表示正负指数

尾数M：尾数最高有效位为1，小数点放在尾数域最前面

- 真值为0的机器数：阶码E=0，尾数M=0。正0：S=0,负0：S=1.
- 无穷大的机器数：阶码E全1，尾数M=0。正无穷：S=0,负无穷：S=1.
- NaN：阶码E全1，尾数M != 0. 不是一个数，通知异常情况。

### 32位单精度浮点数规格化表示

$$
x = & (-1)^s\times (1.M) \times 2^e \\
e = & E - 127
$$

- E = 0000 0001 ~ 1111 1110 (1~254)

- e = -126 ~ +127

- 最小绝对值

    e=-126,M=0

​	1.M = 1

​	$1.0 \times 2^{-126} \approx 1.18 \times 10^{-38}$

- 最大绝对值

    e=127,M=11...1(23个1)

​	1.M = 1.11...1 = $2 - 2^{-23}$

​	$(2-2^{-23}) \times 2^{127} \approx 3.40 \times 10^{38}$

### 64位单精度浮点数规格化表示

$$
x = & (-1)^s\times (1.M) \times 2^e \\
e = & E - 1023
$$

- E = 1~2046

- e = -1022~+1023

- 最小绝对值

    e=-1022,M=0

​	1.M = 1

​	$1.0 \times 2^{-1022} \approx 2.23 \times 10^{-308}$

- 最大绝对值

    e=1023,M=11...1(52个1)

​	1.M = 1.11...1 = $2 - 2^{-52}$

​	$(2-2^{-52}) \times 2^{1023} \approx 1.79 \times 10^{308}$

> 例1：**浮点机器数** (41360000)16，求真值
>
> ![image-20240518124925859](./%E8%AE%A1%E7%BB%84.assets/image-20240518124925859.png)
>
> 例2：真值20.59375，求32位单精度浮点数
>
> ![image-20240518125153565](./%E8%AE%A1%E7%BB%84.assets/image-20240518125153565.png)

# 3 数的机器码表示

## 原码

正数：最前面加一个符号位

负数：最前面加一个符号位

## 反码

正数：不变

负数：与原码数值位相反

## 补码

正数：不变

负数：原负数加上模。**最低位不变，其他各数值位取反。**

- 定点小数x0.x1x2…xn ，以2为模

- 定点整数x0x1x2…xn ，以2n+1为模

## 移码

$[X]_{移码} = 2^n + X \\ -2^n \leq X < 2^n$

最高位为符号位

> 例：
>
> [105]移码＝10000000＋01101001＝11101001
>
> [-105]移码＝10000000－01101001＝00010111

# 4 定点加减法运算规则

计算机中均采用补码加减运算。参加运算的操作数均用补码表示并且运算结果也以补码表示。

## 补码加法

