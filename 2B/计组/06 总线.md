# 基本概念

-   内部总线：CPU内部连接各寄存器及运算部件之间的总线

-   系统总线：CPU同计算机系统的其他高速功能部件（如存储器、通道）互相连接的总线

-   I/O总线：中、低速设备之间互相连接的总线

-   总线带宽：总线本身所能达到的最高传输速率，兆字节每秒（MB/s）

    >   某总线在一个总线周期中并行传送4字节的数据，假设一个总线周期等于一个总线时钟周期，总线时钟频率位33MHz，求总线带宽。
    >
    >   $D_r = D/T=D \times f = 4B \times 33 \times 10^6 /s = 132MB/s$  

# 总线的内部结构

-   地址线：单向，传送主存与设备的地址
-   数据线：双向，用来传送数据
-   控制线：对每一根线是单向的（CPU发向接口，或接口发向CPU），用来指明数据传送的方向、中断控制和定时控制等。

# 总线仲裁

-   总线占用期：主方持续控制总线的时间

## 集中式仲裁

每个功能模块有两条线连接到总线控制器：送往仲裁器的总线请求信号线BR;仲裁器送出的总线授权信号线BG。

-   菊花链查询方式

    -   通过接口的优先级排队电路来实现
    -   使用的线较少，能按一定优先次序实现总线仲裁
    -   易扩充设备
    -   对电路故障敏感
    -   优先级固定

    ![image-20240622132351259](./06%20%E6%80%BB%E7%BA%BF.assets/image-20240622132351259.png)

-   计数器定时查询

    ![image-20240622132411202](./06%20%E6%80%BB%E7%BA%BF.assets/image-20240622132411202.png)

    -   在BS线为0的情况下让计数器开始计数，计数值通过一组地址线发向各设备。每个设备接口有一个设备地址判别电路，**当地址线上的计数值与请求总线的设备地址一致时**，设备获得总线使用权。
    -   每次计数如果从“0”开始，各设备的优先次序与菊花链查询法相同；如果从中止点开始，各个设备的使用总线的优先级相等。

-   独立请求方式

    

![image-20240622133034146](./06%20%E6%80%BB%E7%BA%BF.assets/image-20240622133034146.png)

-   响应时间看
-   对优先次序的控制灵活，可预先固定优先级。